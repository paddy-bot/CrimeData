<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles.css" />
    <script src="scripts.js" async></script>
    <!--Fonts-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <!--GoogleMaps API-->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD9YGHnHVhnGmgZy4TU6Oaq9jmOv6gXuik&callback=initMap" async defer></script>
    <!--Leaflet-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.5.1/MarkerCluster.css" />
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.5.1/MarkerCluster.Default.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.5.1/leaflet.markercluster.js"></script>
    <!-- Map & Api Src -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/leaflet.gridlayer.googlemutant@latest/dist/Leaflet.GoogleMutant.js"></script>
    <script src="map.js"></script>
    
    <title>Home</title>
</head>

<body>
    <!-- Navbar -->
    <header>
        <nav class="navbar">
            <ul class="nav-menu">
                <li class="nav-item" onclick="hideNav()"><a href="#" class="nav-btn"><i class="arrow right"></i></a></li>
                <li class="nav-item" id="hideNav1"><a href="#" class="nav-link">Map</a></li>
                <li class="nav-item" id="hideNav2"><a href="#" class="nav-link">Graph</a></li>
                <li class="nav-item" id="hideNav3"><a href="#" class="nav-link">FAQ</a></li>
            </ul>
            <!--For Mobile Responsive-->
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </nav>
    </header>
    <button class="showHide" id="showHide" onclick="hideFilter()" style="display:none">Show Filter</button>
    <div class="grid-wrapper">

        <section id="filter" class="filter-box">
        <input id="Hide" type="button" value="Hide Filters" onclick="hideFilter()" />
            <h1 id="filterA">Filters</h1>
            <!-- Add checkboxes for crime categories -->
            <div class="crime-filter">	
                <label><input type="checkbox" name="Theft" value="Theft" id="theftF" onclick="toggleButtons(1)"
                        checked>Theft</label><br>
                <label id="breakF">&ensp;<input type="checkbox" name="Break-in" value="Break-in" id="breakF"
                        onclick="toggleButtons(1.1)" checked>Break-ins</label><br>
                <label id="breakCo">&emsp;<input type="checkbox" name="Commerical" value="Commerical" id="breakCo"
                        checked>Commercial</label><br>
                <label id="breakR">&emsp;<input type="checkbox" name="Residential" value="Residential" id="breakR"
                        checked>Residential</label><br>
                <label id="theftV">&ensp;<input type="checkbox" name="Vehicle" value="Vehicle" id="theftV"
                        onclick="toggleButtons(1.2)" checked>Vehicle</label><br>
                <label id="tFV">&emsp;<input type="checkbox" name="Theft from Vehicle" value="Theft from Vehicle" id="tFV"
                        checked>Theft from Vehicle</label><br>
                <label id="tOV">&emsp;<input type="checkbox" name="Theft Of Vehicle" value="Theft Of Vehicle" id="tOV"
                        checked>Theft Of Vehicle</label><br>

                <br>
                <label id="violent"><input type="checkbox" name="Violent Offence" value="Violent Offence" id="violent"
                        onclick="toggleButtons(2)" checked>Violent Offence</label><br>
                <label id="assault">&ensp;<input type="checkbox" name="Assault" value="Assault" id="assault"
                        onclick="toggleButtons(2.1)" checked>Assault</label><br>
                <label id="assaultWDW">&emsp;<input type="checkbox" name="AssaultWDW" value="AssaultWDW" id="assaultWDW"
                        checked>Assault With Deadly Weapon</label><br>
                <label id="Sassault">&emsp;<input type="checkbox" name="SAssault" value="SAssault" id="SassaultWDW" checked>Sexual Assault</label><br>
                <label id="kidnapping">&ensp;<input type="checkbox" name="Kidnapping" value="Kidnapping" id="kidnapping" checked>Kidnapping</label><br>
                <label id="homicide">&ensp;<input type="checkbox" name="Homicide" value="Homicide" id="homicide" checked>Homicide</label><br>
                
                <br>
                <label id="disturbance"><input type="checkbox" name="Disturbance" value="Disturbance" id="disturbance" onclick="toggleButtons(3)" checked>Disturbance</label><br>
                <label id="disorder">&ensp;<input type="checkbox" name="Disorder" value="Disorder" id="disorder" checked>Disorder</label><br>
                <label id="drugs">&ensp;<input type="checkbox" name="Drugs" value="Drugs" id="drugs" onclick="toggleButtons(3.1)" checked>Drugs</label><br>
                <label id="narcotics">&emsp;<input type="checkbox" name="Narcotics" value="Narcotics" id="narcotics" checked>Narcotics</label><br>
                <label id="alcohol">&emsp;<input type="checkbox" name="alcohol" value="Alcohol" id="alcohol" checked>Alcohol</label><br>
                
                <br>
                <label id="other"><input type="checkbox" name="Other" value="Other" id="other" onclick="toggleButtons(4)" checked>Other 911 calls</label><br>
                <label id="fire">&ensp;<input type="checkbox" name="Fire" value="Fire" id="fire" checked>Fire</label><br>
                <label id="medicalEmergency">&ensp;<input type="checkbox" name="MedicalEmergency" value="MedicalEmergency" id="medicalEmergency" checked>Medical Emergency</label><br>
                <label id="otherCall">&ensp;<input type="checkbox" name="OtherCall" value="OtherCall" id="otherCall" checked>Other Call</label><br>
                <label id="qolCheck">&ensp;<input type="checkbox" name="QOLCheck" value="QOLCheck" id="qolCheck" checked>Quality of Life Check</label><br>
            </div>
        </section>
        <section class="map-box">
        
            <div id="map-container" style="width: 100%; height: 55%;"></div>
            <button id="hideDate" onclick="hideDates()" style="display:flex">Hide Date Filter</button>
            <div id="dateFilter" style="display:flex">
            	<label>From:</label>
            	<input type="date">
            	<label>&emsp;To:</label>
            	<input type="date">
            </div>
            <div id="graph-container" style ="width:100%; height: 100%;"></div>
        </section>
    </div>
    
    <footer>
        <p id="theftToggle" style="display:none">on</p>
        <p id="breakInToggle" style="display:none">on</p>
        <p id="vehicleToggle" style="display:none">on</p>
        <p id="violentOToggle" style="display:none">on</p>
        <p id="assaultToggle" style="display:none">on</p>
        <p id="disturbanceToggle" style="display:none">on</p>
        <p id="drugsToggle" style="display:none">on</p>
        <p id="otherToggle" style="display:none">on</p>
    </footer>
    <!-- For the toggleButtons function, the value of x corresponds to different groups of buttons categories, 1 is for the overall theft category, 2 is for the overall violent offence category -->
    <!-- For the toggleButtons function, decimal values should be used for subcategories of main categories (ex: 1.1 for break-ins, 1.2 for vehicle theft, etc) -->
    <script>

        function toggleButtons(x) {
            if (x == 1) {
                if (document.getElementById("theftToggle").innerHTML == "off") {
                    document.getElementById("breakF").style.display = "inline";
                    if (document.getElementById("breakInToggle").innerHTML == "on") {
                        document.getElementById("breakCo").style.display = "inline";
                        document.getElementById("breakR").style.display = "inline";
                    }
                    document.getElementById("theftV").style.display = "inline";
                    if (document.getElementById("vehicleToggle").innerHTML == "on") {
                        document.getElementById("tFV").style.display = "inline";
                        document.getElementById("tOV").style.display = "inline";
                    }
                    document.getElementById("theftToggle").innerHTML = "on";
                } else {
                    document.getElementById("breakF").style.display = "none";
                    document.getElementById("breakCo").style.display = "none";
                    document.getElementById("breakR").style.display = "none";
                    document.getElementById("theftV").style.display = "none";
                    document.getElementById("tFV").style.display = "none";
                    document.getElementById("tOV").style.display = "none";
                    document.getElementById("theftToggle").innerHTML = "off";

                }

            } else if (x == 1.1) {
                if (document.getElementById("breakInToggle").innerHTML == "off") {
                    document.getElementById("breakCo").style.display = "inline";
                    document.getElementById("breakR").style.display = "inline";
                    document.getElementById("breakInToggle").innerHTML = "on";
                } else {
                    document.getElementById("breakCo").style.display = "none";
                    document.getElementById("breakR").style.display = "none";
                    document.getElementById("breakInToggle").innerHTML = "off";
                }
            } else if (x == 1.2) {
                if (document.getElementById("vehicleToggle").innerHTML == "off") {
                    document.getElementById("tFV").style.display = "inline";
                    document.getElementById("tOV").style.display = "inline";
                    document.getElementById("vehicleToggle").innerHTML = "on";
                } else {
                    document.getElementById("tFV").style.display = "none";
                    document.getElementById("tOV").style.display = "none";
                    document.getElementById("vehicleToggle").innerHTML = "off";
                }
            }

            if (x == 2) {
                if (document.getElementById("violentOToggle").innerHTML == "off") {
                    document.getElementById("assault").style.display = "inline";
                    if (document.getElementById("assaultToggle").innerHTML == "on") {
                        document.getElementById("assaultWDW").style.display = "inline";
                        document.getElementById("Sassault").style.display = "inline";
                    }
                    document.getElementById("kidnapping").style.display = "inline";
                    document.getElementById("homicide").style.display = "inline";
                    document.getElementById("violentOToggle").innerHTML = "on";
                } else {
                    document.getElementById("assault").style.display = "none";
                    document.getElementById("assaultWDW").style.display = "none";
                    document.getElementById("Sassault").style.display = "none";
                    document.getElementById("kidnapping").style.display = "none";
                    document.getElementById("homicide").style.display = "none";
                    document.getElementById("violentOToggle").innerHTML = "off";
                }
            } else if (x == 2.1) {
                if (document.getElementById("assaultToggle").innerHTML == "off") {
                    document.getElementById("assaultWDW").style.display = "inline";
                    document.getElementById("Sassault").style.display = "inline";
                    document.getElementById("assaultToggle").innerHTML = "on";
                } else {
                    document.getElementById("assaultWDW").style.display = "none";
                    document.getElementById("Sassault").style.display = "none";
                    document.getElementById("assaultToggle").innerHTML = "off";
                }
            }
            
            if (x == 3) {
            	if (document.getElementById("disturbanceToggle").innerHTML == "off") {
                	document.getElementById("disorder").style.display = "inline";
                    document.getElementById("drugs").style.display = "inline";
                    if (document.getElementById("drugsToggle").innerHTML == "on") {
                    	document.getElementById("narcotics").style.display = "inline";
                    	document.getElementById("alcohol").style.display = "inline";
                    }
                    document.getElementById("disturbanceToggle").innerHTML = "on";
                } else {
                	document.getElementById("disorder").style.display = "none";
                    document.getElementById("drugs").style.display = "none";
                    document.getElementById("narcotics").style.display = "none";
                    document.getElementById("alcohol").style.display = "none";
                	document.getElementById("disturbanceToggle").innerHTML = "off"
                }
            } else if (x == 3.1) {
            	if (document.getElementById("drugsToggle").innerHTML == "off") {
                	document.getElementById("narcotics").style.display = "inline";
                    document.getElementById("alcohol").style.display = "inline";
                    document.getElementById("drugsToggle").innerHTML = "on";
                } else {
                	document.getElementById("narcotics").style.display = "none";
                    document.getElementById("alcohol").style.display = "none";
                    document.getElementById("drugsToggle").innerHTML = "off";
                }
            }
            
            if (x == 4) {
            	if (document.getElementById("otherToggle").innerHTML == "off") {
                	document.getElementById("fire").style.display = "inline";
                    document.getElementById("medicalEmergency").style.display = "inline";
                    document.getElementById("otherCall").style.display = "inline";
                    document.getElementById("qolCheck").style.display = "inline";
                    document.getElementById("otherToggle").innerHTML = "on"
                } else {
                	document.getElementById("fire").style.display = "none";
                    document.getElementById("medicalEmergency").style.display = "none";
                    document.getElementById("otherCall").style.display = "none";
                    document.getElementById("qolCheck").style.display = "none";
                    document.getElementById("otherToggle").innerHTML = "off"
                }
            }
        }
    </script>

    <!-- Add event listener for toggling crime categories -->
    <script>
        document.querySelectorAll('input[name="crime-category"]').forEach(function (checkbox) {
            checkbox.addEventListener('change', function (e) {
                toggleCategory(e.target.value, e.target.checked);
            });
        });
    </script>
    <script>
        window.addEventListener('DOMContentLoaded', function () {
            initMap();
        });
    </script>

</body>

</html>